transmission:
  controller:
    enabled: true

  env:
    TZ: Europe/Zurich
    PUID: 666
    PGID: 666
    TRANSMISSION_WEB_HOME: ""
    TRANSMISSION_RPC_USERNAME: 
    TRANSMISSION_RPC_PASSWORD: 
    TRANSMISSION_RPC_AUTHENTICATION_REQUIRED: "true"
    # WHITELIST: "transmission.framsburg.ch, 192.168.42.150, 192.168.42.*, 10.43.*.*, 10.42.*.*"
    RPC_URL: https://transmission.framsburg.ch/transmission/rpc

  service:
    utptcp:
      enabled: true
      type: LoadBalancer
      externalIPs:
        - 192.168.42.152
    utpudp:
      enabled: true
      type: LoadBalancer
      externalIPs:
        - 192.168.42.152

  ingress:
    main:
      enabled: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
        traefik.passHostHeader: "true"
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.priority: "10"
      hosts:
        - host: 'transmission.framsburg.ch'
          paths:
            - path: /transmission
              pathType: Prefix
      tls:
        - hosts: ['transmission.framsburg.ch']
          secretName: 'transmission-framsburg-ch-tls'

  securityContext:
    fsGroup: 666
    fsGroupChangePolicy: Always

  persistence:
    config:
      enabled: true
      type: pvc
      size: 1Gi
      accessMode: ReadWriteOnce

    downloads:
      enabled: true
      type: pvc
      size: 300Gi
      storageClass: longhorn-nfs-transient-v1
      accessMode: ReadWriteMany

flood:
  controller:
    enabled: true

  env:
    TZ: Europe/Zurich
    # FLOOD_OPTION_rundir: /data
    FLOOD_OPTION_auth: none
    FLOOD_OPTION_trurl: 'http://torrent-transmission:9091/transmission/rpc'
    FLOOD_OPTION_truser: 'admin'
    FLOOD_OPTION_trpass: 'adminadmin'

  ingress:
    main:
      enabled: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.priority: "10"
      hosts:
        - host: 'flood.framsburg.ch'
          paths:
            - path: /
              pathType: Prefix
      tls:
        - hosts: ['flood.framsburg.ch']
          secretName: 'flood-framsburg-ch-tls'

  podSecurityContext:
    runAsUser: 666
    runAsGroup: 666
    fsGroup: 666

  persistence:
    data:
      enabled: true
      type: pvc
      size: 1Gi
      accessMode: ReadWriteOnce
      mountPath: /data

  probes:
    liveness:
      enabled: false
    readiness:
      enabled: false

qbittorrent:
  controller:
    enabled: true

  strategy:
    type: Recreate

  env:
    TZ: Europe/Zurich

    QBT_BitTorrent__Session__BTProtocol: TCP
    QBT_BitTorrent__Session__DisableAutoTMMByDefault: 'false'
    QBT_BitTorrent__Session__DisableAutoTMMTriggers__CategorySavePathChanged: 'false'
    QBT_BitTorrent__Session__DisableAutoTMMTriggers__DefaultSavePathChanged: 'false'
    QBT_BitTorrent__Session__DefaultSavePath: /mnt/media/torrents/completed/
    QBT_BitTorrent__Session__TempPath: /mnt/media/torrents/incomplete/
    QBT_BitTorrent__Session__TempPathEnabled: 'true'
    QBT_BitTorrent__Session__Categories: '@Variant(\0\0\0\b\0\0\0\x2\0\0\0\f\0r\0\x61\0\x64\0\x61\0r\0r\0\0\0\n\0\0\0J\0/\0m\0n\0t\0/\0m\0\x65\0\x64\0i\0\x61\0/\0t\0o\0r\0r\0\x65\0n\0t\0s\0/\0\x63\0o\0m\0p\0l\0\x65\0t\0\x65\0\x64\0/\0r\0\x61\0\x64\0\x61\0r\0r\0/\0\0\0\x10\0i\0m\0p\0o\0r\0t\0\x65\0\x64\0\0\0\n\0\0\0J\0/\0m\0n\0t\0/\0m\0\x65\0\x64\0i\0\x61\0/\0t\0o\0r\0r\0\x65\0n\0t\0s\0/\0\x63\0o\0m\0p\0l\0\x65\0t\0\x65\0\x64\0/\0r\0\x61\0\x64\0\x61\0r\0r\0/)'
    QBT_Core__AutoDeleteAddedTorrentFile: Never

    QBT_Preferences__Advanced__RecheckOnCompletion: 'false'

    QBT_Preferences__Bittorrent__DHT: 'false'
    QBT_Preferences__Bittorrent__PeX: 'false'
    QBT_Preferences__Bittorrent__LSD: 'false'
    QBT_Preferences__Bittorrent__Encryption: '1'
    QBT_Preferences__Bittorrent__MaxUploads: '1000'
    QBT_Preferences__Bittorrent__MaxUploadsPerTorrent: '10'

    QBT_Preferences__Connection__GlobalDLLimit: '31250'
    QBT_Preferences__Connection__GlobalDLLimitAlt: '12500'
    QBT_Preferences__Connection__GlobalUPLimitAlt: '0'
    QBT_Preferences__Connection__ResolvePeerCountries: 'true'
    QBT_Preferences__Connection__UPnP: 'false'
    QBT_Preferences__Connection__alt_speeds_on: 'false'

    QBT_Preferences__Downloads__DiskWriteCacheSize: '256'
    QBT_Preferences__Downloads__SavePath: /mnt/media/torrents/completed/
    QBT_Preferences__Downloads__SaveResumeDataInterval: '15'
    QBT_Preferences__Downloads__TempPath: /mnt/media/torrents/incomplete/
    QBT_Preferences__Downloads__TempPathEnabled: 'true'
    QBT_Preferences__Downloads__UseIncompleteExtension: 'true'

    QBT_Preferences__General__Locale: en

    QBT_Preferences__Queueing__IgnoreSlowTorrents: 'true'
    QBT_Preferences__Queueing__MaxActiveDownloads: '10'
    QBT_Preferences__Queueing__MaxActiveTorrents: '1010'
    QBT_Preferences__Queueing__MaxActiveUploads: '1000'
    QBT_Preferences__Queueing__QueueingEnabled: 'true'

    QBT_Preferences__Scheduler__Enabled: 'true'
    QBT_Preferences__Scheduler__days: '1' # Weekdays
    QBT_Preferences__Scheduler__end_time: '@Variant(\0\0\0\xf\x4\xb8\x7f\0)' # 13:00 UTC
    QBT_Preferences__Scheduler__start_time: '@Variant(\0\0\0\xf\x2\xca\x1c\x80)' # 22:00 UTC

    QBT_Preferences__WebUI__Address: '*'
    QBT_Preferences__WebUI__AlternativeUIEnabled: 'false'
    QBT_Preferences__WebUI__AuthSubnetWhitelist: 0.0.0.0/0
    QBT_Preferences__WebUI__AuthSubnetWhitelistEnabled: 'false'
    QBT_Preferences__WebUI__LocalHostAuth: 'true'
    QBT_Preferences__WebUI__MaxAuthenticationFailCount: '5'
    QBT_Preferences__WebUI__Port: '8080'
    QBT_Preferences__WebUI__SecureCookie: 'true'
    QBT_Preferences__WebUI__ServerDomains: '*'
    QBT_Preferences__WebUI__SessionTimeout: '3600'
    QBT_Preferences__WebUI__UseUPnP: 'false'
    QBT_Preferences__WebUI__Username: mike

  ingress:
    main:
      enabled: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.priority: "10"
      hosts:
        - host: 'qbit.framsburg.ch'
          paths:
            - path: /
              pathType: Prefix
      tls:
        - hosts: ['qbit.framsburg.ch']
          secretName: 'qbit-framsburg-ch-tls'

  persistence:
    config:
      enabled: true
      type: pvc
      size: 1Gi
      accessMode: ReadWriteOnce
      mountPath: /config
    data:
      enabled: true
      type: pvc
      size: 200Gi
      storageClass: longhorn-nfs-transient-v1
      accessMode: ReadWriteMany
      mountPath: /mnt/media

  podSecurityContext:
    runAsUser: 666
    runAsGroup: 666
    fsGroup: 666

  resources:
    limits:
      cpu: "1"
      memory: "10Gi"
    requests:
      cpu: "200m"
      memory: "600Mi"

  probes:
    liveness:
      spec:
        failureThreshold: 60
    readiness:
      spec:
        failureThreshold: 60
